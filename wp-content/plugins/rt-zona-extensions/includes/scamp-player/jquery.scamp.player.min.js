/*!
 * Scamp Player ver. 2.2.8

 * jQuery SoundManager 2 Plugin
 *
 * Copyright (c) 2015 Mariusz Rek
 * Rascals Themes 2015
 *
 */
(function(a){a.ScampPlayer=function(b,c){var m={sm_options:{},queue:null,iscroll_options:{scrollX:false,scrollY:true,mouseWheel:true,scrollbars:true,interactiveScrollbars:true,scrollbars:"custom",click:true},volume_user:80,volume:100,smooth_transition:false,shoutcast_interval:20000,shoutcast_timer:false,shoutcast:true,is_shoutcast:false,autoplay:false,loop:false,random:false,titlebar:false,no_track_image:null,delay:5,path:null,load_first_track:true,client_id:"23f5c38e0aa354cdd0e1a6b4286f6aa4",debug:false,local_storage:false,link_filter:".track-title",labels:{play:"Play",cover:"Cover",title:"Title/Artist",buy:"Buy/Download",remove:"Remove",empty_queue:"Empty Queue"},obj:{status:"ready",action:"",tracks:[],tracks_size:0,track_nr:-1},storage_play:false,play_from_list:false,mobile:false,status:null,soundcloud:false,replace_sc_covers:true,track_id:0,new_tracks_nr:0,new_tracks_notifications:true,sm_init:false,rebuild:false,sound:null,track:null,searching:false,tracklist_length:null,document_title:document.title,track_html:null,tracklist:null,is_mouse:false,onReady:function(){},onTrackEnd:function(){},onTrackStart:function(){}};
var d=this;d.settings={};var q=function(){d.settings=a.extend({},m,c);d.el=b;if(window.soundManager){sm_obj={onready:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){d.settings.mobile=true;
}var x=false;var B=0;function F(H){B=0;x=true;}function A(H){x=false;B=0;}function y(H){if(!x){B++;if(B>5){window.removeEventListener("mousemove",y,false);
d.settings.is_mouse=true;}}else{B=0;}}window.addEventListener("mousemove",y,false);window.addEventListener("mousedown",F,false);window.addEventListener("mouseup",A,false);
if(d.settings.mobile){d.settings.smooth_transition=false;d.settings.autoplay=false;}if(d.settings.mobile&&d.settings.path!=null){a("body").append('<div id="scamp-mobile-init"></div>');
a("#scamp-mobile-init").on("click touch mousemove mousedown",function(I){$that=a(this);var H=soundManager.createSound({id:"init_mobile_track",url:d.settings.path+"/blank.mp3",autoload:false,volume:100,onload:function(){},onplay:function(){},onpause:function(){},onresume:function(){},onstop:function(){},onfinish:function(){$that.remove();
},whileloading:function(){},whileplaying:function(){}});H.play();});}if(typeof SC!=="undefined"){SC.initialize({client_id:d.settings.client_id});SC.whenStreamingReady(function(){d.settings.soundcloud=true;
});}d.settings.sm_init=true;var C=null;if(a("> a",d.el).length){C=new Array();var D=a("> a",d.el).length;a("> a",d.el).each(function(){C.push(a(this));
a(this).remove();});}d.el.append('<div id="sp-toggle-wrap"><div id="sp-toggle"></div></div><div class="sp-main-container"><div class="sp-queue-container"><div class="sp-queue"><div id="sp-scroller"><table id="sp-queue-scroll"><thead><tr><th class="sp-list-controls" colspan="5"><span id="sp-empty-queue">'+d.settings.labels.empty_queue+"</span></th></tr><tr><th>"+d.settings.labels.play+"</th><th>"+d.settings.labels.cover+'</th><th class="sp-th-title">'+d.settings.labels.title+'</th><th class="sp-th-cart sp-small-screen">'+d.settings.labels.buy+'</th><th class="sp-th-remove sp-small-screen sp-medium-screen">'+d.settings.labels.remove+'</th></tr></thead><tbody></tbody></table></div></div><div class="sp-progress-mobile"><div class="sp-progress"><span class="sp-loading"></span><span class="sp-position"></span><span class="sp-time-elapsed"></span><span class="sp-time-total"></span></div></div></div><div class="sp-player-container"><div class="sp-buttons-container"><div class="sp-controls"><a class="sp-prev-button"></a><a class="sp-play-button"></a><a class="sp-next-button"></a><div class="sp-volume-container"><div class="sp-volume-bar-container"><div class="sp-volume-slider"><span class="sp-volume-position"></span></div></div><a class="sp-volume-button"></a></div></div><div class="sp-queue-button-container"><span class="sp-badge"></span><a class="sp-queue-button"></a></div></div><div class="sp-progress-container"><div class="sp-progress"><span class="sp-loading"></span><span class="sp-position"></span><span class="sp-time-elapsed"></span><span class="sp-time-total"></span></div></div><div class="sp-track-container"><div class="sp-track-details"><a class="sp-track-cover"><img src="'+d.settings.no_track_image+'" alt="Track cover" class="sp-track-artwork"/></a><a class="sp-track-title"></a><a class="sp-track-artist"></a><div class="sp-marquee-container"><span class="sp-marquee"></span></div></div></div></div></div>');
d.settings.track_html=['<tr class="sp-track">','<td><a class="sp-track-control sp-icon" href="#"></a></td>','<td class="sp-cover-artwork"><img src="" alt="Cover" /></td>','<td class="sp-title"><a class="sp-title-button"></a><a class="sp-artist-button"></a></td>','<td class="sp-cart sp-small-screen"><a class="sp-icon sp-cart-button"></a></td>','<td class="sp-remove sp-small-screen sp-medium-screen"><span class="sp-icon sp-remove-button"></span></td>'].join("\n");
d.settings.tracklist=a("#sp-queue-scroll");if(typeof IScroll!=="undefined"){d.settings.queue=new IScroll("#sp-scroller",d.settings.iscroll_options);}else{return false;
}if(a(d.el).hasClass("sp-show-list")){_set_queue_height();}a(".sp-volume-position").css("width",d.settings.volume+"%");_set_vol_class(d.settings.volume);
if(!d.settings.mobile){var G=function(H){a(".sp-volume-bar-container").fadeToggle(200,"swing");d.el.removeClass("sp-show-list");H.preventDefault();H.stopPropagation();
};a(".sp-volume-button").on("click",G);a(document).click(function(I){var H=a(".sp-volume-bar-container");if(!H.is(I.target)&&H.has(I.target).length===0){a(".sp-volume-button").off("click");
a(".sp-volume-bar-container").fadeOut(200,"swing",function(){a(".sp-volume-button").on("click",G);});}});}if(typeof(Storage)!=="undefined"&&sessionStorage.getItem("scamp_player_list")!==null&&sessionStorage.getItem("scamp_player_list")!==""){d.settings.local_storage=true;
var E=sessionStorage.getItem("scamp_player_list"),z=0;a("#sp-queue-scroll tbody").html(E);a("#sp-queue-scroll tbody .sp-track-control").on("click",j);a("#sp-queue-scroll tbody .sp-remove-button").on("click",o);
d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;a("#sp-queue-scroll .sp-track").removeClass("loading");if(!d.settings.mobile){if(a("#sp-queue-scroll .sp-track.playing").length){d.settings.track=a("#sp-queue-scroll .sp-track.playing");
if(sessionStorage.getItem("scamp_player_pos")!==null){z=sessionStorage.getItem("scamp_player_pos");}if(sessionStorage.getItem("scamp_player_shoutcast")==true){g("play",0);
}else{g("play",z);}d.settings.storage_play=true;}else{if(a("#sp-queue-scroll .sp-track.paused").length){d.settings.track=a("#sp-queue-scroll .sp-track.paused");
if(sessionStorage.getItem("scamp_player_pos")!==null){z=sessionStorage.getItem("scamp_player_pos");}g("pause",z);d.settings.storage_play=false;}else{d.settings.track=a("#sp-queue-scroll .sp-track:eq(0)");
g("pause",0);d.settings.storage_play=false;}}}else{if(a("#sp-queue-scroll .sp-track.playing").length){d.settings.track=a("#sp-queue-scroll .sp-track.playing");
}else{if(a("#sp-queue-scroll .sp-track.paused").length){d.settings.track=a("#sp-queue-scroll .sp-track.paused");}else{d.settings.track=a("#sp-queue-scroll .sp-track:eq(0)");
}}if(sessionStorage.getItem("scamp_player_pos")!==null){z=sessionStorage.getItem("scamp_player_pos");}else{z=0;}g("pause",z);d.settings.storage_play=false;
}}else{if(C!==null){d.settings.obj={status:"working",action:"add_tracks",tracks:C,tracks_size:D,track_nr:-1,};t();}}a(".sp-play-button, .sp-next-button, .sp-prev-button").on("touchstart click",function(){d.settings.play_from_list=false;
});a(".sp-play-button").on("touchstart click",_play);a(".sp-next-button").on("touchstart click",f);a(".sp-prev-button").on("touchstart click",e);a(".sp-queue-button").on("touchstart click",function(H){d.el.toggleClass("sp-show-list");
_set_queue_height();H.preventDefault();});a("#sp-toggle").on("touchstart click",function(H){d.el.toggleClass("sp-show-player");H.preventDefault();});a("#sp-empty-queue").on("touchstart click",function(H){d.settings.play_from_list=false;
if(a("#sp-queue-scroll .sp-track.playing").length||a("#sp-queue-scroll .sp-track.paused").length){_destruct_sound();clearInterval(d.settings.shoutcast_timer);
}a("#sp-queue-scroll .sp-track").not(".playing").remove();d.settings.track=null;d.settings.tracklist_length=null;p(0);a(".sp-progress").find(".sp-position").width(0);
a(".sp-progress").find(".sp-loading").width(0);a(".sp-content-control.sp-is-active").removeClass("sp-is-active");if(typeof(Storage)!=="undefined"){sessionStorage.removeItem("scamp_player_list");
}H.preventDefault();});l();d.update_events("body");d.el.addClass("sp-show");d.settings.onReady.call(undefined);return;},ontimeout:function(){},defaultOptions:{volume:d.settings.volume,usePeakData:false}};
a.extend(d.settings.sm_options,sm_obj);soundManager.setup(d.settings.sm_options);}};_set_queue_height=function(){var y=a(".sp-player-container",d.el).outerHeight();
var x=a(".sp-progress-mobile ",d.el).outerHeight();var z=a(window).height();if(a(".sp-progress-mobile",d.el).is(":visible")){z=z-(y*2);}else{z=z-y;y=0;
}a(".sp-queue-container",d.el).css("padding-bottom",y);a(".sp-queue-container",d.el).height(z);setTimeout(function(){d.settings.queue.refresh();},200);
return z;};a(window).on("resize",_set_queue_height);_get_track_index=function(){var x,y=d.settings.track.find(".sp-track-control").attr("href");track_from_queue=a("#sp-queue-scroll").find('.sp-track-control[href="'+y+'"]');
x=track_from_queue.parents('tr[class*="sp-track"]').index();return x;};_has_touch=function(x){return(("ontouchstart" in window)||(navigator.maxTouchPoints>0)||(navigator.msMaxTouchPoints>0));
};function w(){if(d.settings.smooth_transition){var x=0;var y=d.settings.volume;a({vol:x}).animate({vol:y},{duration:2000,step:function(z,A){Math.ceil(d.settings.sound.setVolume(z));
}});}}function v(y,x){if(x==""){x="80";}a.SHOUTcast({host:y,port:x,}).stats(function(){if(this.onAir()){a("#scamp_player .sp-track-container .sp-track-title").text(this.get("songtitle"));
}else{a("#scamp_player .sp-track-container .sp-track-title").text(this.get("status"));}});}var g=function(A,z){if(typeof(z)==="undefined"){z=0;}if(typeof(A)==="undefined"){A="play";
}d.settings.volume_user=d.settings.volume;var y=d.settings.track.find(".sp-track-control").attr("href"),x=document.createElement("a");x.href=y;clearInterval(d.settings.shoutcast_timer);
if(y.indexOf("?sp_radio")>=0){if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_shoutcast",true);}a("#scamp_player").addClass("is-shoutcast");
d.settings.is_shoutcast=true;if(d.settings.shoutcast){if(y.indexOf("listen.radionomy")>=0){}else{if(y.indexOf("&onair=0")>=0){}else{d.settings.shoutcast_timer=setInterval(function(){v(x.hostname,x.port);
},d.settings.shoutcast_interval);v(x.hostname,x.port);}}}}else{a("#scamp_player").removeClass("is-shoutcast");if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_shoutcast",false);
}d.settings.is_shoutcast=false;}d.settings.sound=soundManager.createSound({id:"scamp_sound",url:y,from:z,autoload:false,volume:d.settings.volume,onload:function(){w();
d.settings.status="play";},onplay:function(){var B={title:d.settings.track.find(".sp-title-button").text(),url:d.settings.track.find(".sp-track-control").attr("href"),artist:d.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:d.settings.tracklist_length};
d.settings.onTrackStart.call(this,B);if(d.settings.sound.readyState==3){d.settings.status="play";}else{d.settings.track.addClass("loading");d.el.addClass("loading");
d.settings.status="loading";}d.update_content();a(".sp-volume-position").css("width",d.settings.volume+"%");d.settings.sound.setVolume(d.settings.volume);
},onpause:function(){d.settings.status="pause";d.update_content();if(!d.settings.searching){d.settings.track.removeClass("playing").addClass("paused");
d.el.removeClass("playing").addClass("paused");}},onresume:function(){d.settings.status="play";d.update_content();w();d.settings.track.removeClass("paused").addClass("playing");
d.el.removeClass("paused").addClass("playing");},onstop:function(){d.settings.sound.setPosition(0);clearInterval(d.settings.shoutcast_timer);d.settings.status="stop";
d.update_content();d.settings.track.removeClass("playing loading paused");d.el.removeClass("playing loading paused");a(".sp-time-elapsed, .sp-time-total").empty();
a(".sp-progress").find(".sp-position").width(0);},onfinish:function(){clearInterval(d.settings.shoutcast_timer);var D={title:d.settings.track.find(".sp-title-button").text(),url:d.settings.track.find(".sp-track-control").attr("href"),artist:d.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:d.settings.tracklist_length};
d.settings.onTrackEnd.call(this,D);a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);d.settings.status="stop";
d.update_content();d.settings.track.removeClass("loading paused");d.el.removeClass("loading paused");if(d.settings.play_from_list==false){if(d.settings.random){s();
return false;}if(d.settings.loop){f();}else{var E=_get_track_index();if(E!=d.settings.tracklist_length){f();}else{d.settings.track.removeClass("playing");
d.el.removeClass("playing");}}}else{if(a("#sp-scroller .sp-track.sc-track.playing").length){y=a("#sp-scroller .sp-track.sc-track.playing").attr("data-sc");
}d.settings.track.removeClass("playing");d.el.removeClass("playing");var C=a('a.sp-play-track[href="'+y+'"]');if(C.length&&C.hasClass("sp-play-next")){if(C.parents(".sp-track-item").next().find(".sp-play-track")){var B=C.parents(".sp-track-item").next().find(".sp-play-track");
B.trigger("click");}}}},whileloading:function(){a(".sp-progress").find(".sp-loading").width(d.settings.sound.bytesLoaded/d.settings.sound.bytesTotal*100+"%");
},whileplaying:function(){d.settings.track.removeClass("paused loading").addClass("playing");d.el.removeClass("paused loading").addClass("playing");d.update_content();
if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_pos",d.settings.sound.position);}a(".sp-progress").find(".sp-position").width(d.settings.sound.position/d.settings.sound.durationEstimate*100+"%");
a(".sp-time-elapsed").html(_format_time(d.settings.sound.position));a(".sp-time-total").html(_format_time(d.settings.sound.durationEstimate));if(d.settings.status=="play"){var B=Math.floor(d.settings.sound.position/1000),C=Math.floor(d.settings.sound.durationEstimate/1000);
C=C-4;if(B>=C&&d.settings.smooth_transition&&d.settings.volume_user>0&&!d.settings.is_shoutcast){d.settings.volume_user=d.settings.volume_user-10;Math.ceil(d.settings.sound.setVolume(d.settings.volume_user));
}}}});if((d.settings.load_first_track&&d.settings.local_storage==false)||A==="pause"){d.settings.load_first_track=false;}else{if(A==="play"){d.settings.load_first_track=false;
}d.settings.sound.togglePause();}u();};_play=function(){if(typeof(event)!=="undefined"){if(a(event.target).hasClass("sp-play-button")||a(event.target).hasClass("sp-track-control")){d.settings.storage_play=false;
}}if(d.settings.tracklist_length==null){return;}if(d.settings.track==null){d.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");}if(d.settings.sound){if(d.settings.track.hasClass("playing")){if(d.settings.smooth_transition){var x=d.settings.volume;
var y=0;a({vol:x}).animate({vol:y},{duration:1000,step:function(A,B){Math.ceil(d.settings.sound.setVolume(A));},complete:function(){d.settings.sound.togglePause();
}});}else{d.settings.sound.togglePause();}}else{d.settings.sound.togglePause();}}else{g();}if(d.settings.titlebar){document.title=d.settings.track.find(".sp-title-button").text()+" | "+d.settings.document_title;
}if(typeof(Storage)!=="undefined"){var z=function(){if((d.settings.track!=null)&&(d.settings.track.hasClass("playing")||d.settings.track.hasClass("paused"))){var A=a("#sp-queue-scroll tbody").html();
sessionStorage.setItem("scamp_player_list",A);}else{setTimeout(z,400);}};if(d.settings.smooth_transition){setTimeout(z,2000);}else{z();}}if(typeof(event)!=="undefined"){event.preventDefault();
event.stopPropagation();event.stopImmediatePropagation();}return false;};var s=function(){if(d.settings.tracklist_length==null||d.settings.tracklist_length<2){d.settings.track=x;
_play();return false;}function y(C,B){return Math.floor(Math.random()*(B-C+1))+C;}var A=_get_track_index(),x=null,z=null;while((z=y(0,d.settings.tracklist_length))==A){}d.settings.track.removeClass("playing");
d.el.removeClass("playing");x=a("#sp-queue-scroll tbody tr:eq("+z+")");_destruct_sound();d.settings.track=x;_play();if(d.settings.sound){d.settings.sound.setPosition(0);
}return true;};var f=function(){d.settings.storage_play=false;if(d.settings.tracklist_length==null){return;}var C=_get_track_index(),z=C+1,y=null,B=false;
if(d.el.hasClass("playing")){d.settings.track.removeClass("playing");d.el.removeClass("playing");B=true;}if(z>d.settings.tracklist_length){z=0;}y=a("#sp-queue-scroll tbody tr:eq("+z+")");
if(d.settings.smooth_transition){var x=d.settings.volume;var A=0;a({vol:x}).animate({vol:A},{duration:1000,step:function(D,E){Math.ceil(d.settings.sound.setVolume(D));
},complete:function(){_destruct_sound();d.settings.track=y;if(B){_play();}if(d.settings.sound){d.settings.sound.setPosition(0);}}});}else{_destruct_sound();
d.settings.track=y;if(B){_play();}if(d.settings.sound){d.settings.sound.setPosition(0);}}return false;};var e=function(){d.settings.storage_play=false;
if(d.settings.tracklist_length==null){return;}var C=_get_track_index(),B=C-1,z=null,A=false;if(d.el.hasClass("playing")){d.settings.track.removeClass("playing");
d.el.removeClass("playing");A=true;}if(B<0){B=d.settings.tracklist_length;}z=a("#sp-queue-scroll tbody tr:eq("+B+")");if(d.settings.smooth_transition){var x=d.settings.volume;
var y=0;a({vol:x}).animate({vol:y},{duration:1000,step:function(D,E){Math.ceil(d.settings.sound.setVolume(D));},complete:function(){_destruct_sound();d.settings.track=z;
if(A){_play();}if(d.settings.sound){d.settings.sound.setPosition(0);}}});}else{_destruct_sound();d.settings.track=z;if(A){_play();}if(d.settings.sound){d.settings.sound.setPosition(0);
}}return false;};var k=function(){d.settings.storage_play=false;if(d.settings.tracklist_length==null){return;}if(d.settings.track==null){d.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");
}if(d.settings.sound){d.settings.sound.stop();}return false;};var u=function(){a(".sp-track-container a",d.el).removeAttr("href").removeAttr("target");
a(".sp-track-container .sp-track-title, .sp-track-container .sp-track-artist",d.el).text("");a(".sp-track-container .sp-track-artwork",d.el).attr("src",d.settings.no_track_image);
a(".sp-marquee",d.el).text("");if(d.settings.sound){var D=d.settings.track.find(".sp-cover-artwork img").attr("src"),E=d.settings.track.find(".sp-title-button").text(),z=d.settings.track.find(".sp-artist-button").text(),B=d.settings.track.find(".sp-artist-button").attr("href"),y=d.settings.track.find(".sp-artist-button").attr("target"),x=d.settings.track.find(".sp-title-button").attr("href"),C=d.settings.track.find(".sp-title-button").attr("target");
shop_url=d.settings.track.find(".sp-tl-shop").attr("href"),shop_target=d.settings.track.find(".sp-tl-shop").attr("target");if(z!==""&&B!==""){a(".sp-track-container .sp-track-artist",d.el).attr("href",B);
if(y!==""){y=y;}else{y="_self";}a(".sp-track-container .sp-track-artist",d.el).attr("target",y);}if(x!==""){a(".sp-track-container .sp-track-title",d.el).attr("href",x);
if(C!==""){C=C;}else{C="_self";}a(".sp-track-container .sp-track-title",d.el).attr("target",C);}a(".sp-track-container .sp-track-artwork",d.el).attr("src",D);
a(".sp-track-container .sp-track-title",d.el).text(E);a(".sp-track-container .sp-track-artist",d.el).text(z);var A="<strong>"+E+"</strong>";if(z!==""){A=A+" - "+z;
}a(".sp-marquee",d.el).html(A);}return false;};_destruct_sound=function(){if(d.settings.sound){d.settings.sound.stop();d.settings.sound.setPosition(0);
d.settings.sound.destruct();d.settings.sound=null;u();}};var t=function(){d.settings.obj.track_nr++;if(d.settings.obj.track_nr==0){d.el.addClass("sp-queue-loading");
a(".sp-queue").css("opacity",0);}if(d.settings.obj.track_nr>=d.settings.obj.tracks_size){h();}else{setTimeout(r,d.settings.delay);}};var h=function(){var z=null,y=null,A=null;
if(a("#sp-scroller tr").length>0&&d.settings.rebuild){_set_queue_height();d.el.removeClass("sp-queue-loading");a(".sp-queue").css("opacity",1);d.settings.rebuild=false;
if(d.settings.new_tracks_notifications){a(".sp-badge",d.el).text("+"+d.settings.new_tracks_nr);if(a(".sp-badge",d.el).text()!="+0"){a(".sp-badge",d.el).addClass("sp-show-badge");
setTimeout(function(){a(".sp-badge",d.el).removeClass("sp-show-badge");},5000);}}d.settings.new_tracks_nr=0;}else{d.el.removeClass("sp-queue-loading");
a(".sp-queue").css("opacity",1);}if(d.settings.track!=null&&d.settings.autoplay){if(d.settings.random){s();}else{_play();}d.settings.autoplay=false;}else{if(d.settings.track!=null&&d.settings.load_first_track){if(d.settings.random){s();
}else{_play();}}}if(d.settings.obj.action=="play_track"||d.settings.obj.action=="play_tracks"){for(var B=0;B<d.settings.obj.tracks_size;B++){z=d.settings.obj.tracks[B].data("status");
A=d.settings.obj.tracks[B].attr("href");if(z=="track_ready"||z=="already_onlist"){y=d.settings.track.find(".sp-track-control").attr("href");if(y!=A){if(d.settings.smooth_transition){var x=d.settings.volume;
var C=0;a({vol:x}).animate({vol:C},{duration:1000,step:function(E,F){Math.ceil(d.settings.sound.setVolume(E));},complete:function(){_destruct_sound();var E=a("#sp-queue-scroll").find('.sp-track-control[href="'+A+'"]');
d.settings.track=E.parents('tr[class*="sp-track"]');_play();}});}else{_destruct_sound();var D=a("#sp-queue-scroll").find('.sp-track-control[href="'+A+'"]');
d.settings.track=D.parents('tr[class*="sp-track"]');_play();}}else{_play();}break;}}}d.settings.obj.status="ready";};var r=function(){var z=d.settings.obj.track_nr,y=d.settings.obj.tracks[z].attr("href"),x=/http(s?):\/\/soundcloud/;
if(x.test(y)){if(a('.sp-queue .sp-track[data-sc="'+y+'"]').length>0){d.settings.obj.tracks[z].attr("data-status","already_onlist");var A=a('#sp-queue-scroll tbody .sp-track[data-sc="'+y+'"]');
A=A.find(".sp-track-control").attr("href");d.settings.obj.tracks[z].attr("href",A);t();}else{_add_soundcloud();}}else{if(a('.sp-queue .sp-track-control[href="'+y+'"]').length>0){d.settings.obj.tracks[z].attr("data-status","already_onlist");
t();}else{if(y!=""||y!="#"||y!=undefined){d.settings.obj.tracks[z].attr("data-status","file_exists");_create_track();}else{d.settings.obj.tracks[z].attr("data-status","Error404");
d.settings.play_from_list=false;t();}}}};_add_soundcloud=function(){var z=d.settings.obj.track_nr,x=d.settings.obj.tracks[z].attr("href");if(d.settings.client_id==""){d.settings.obj.tracks[z].attr("data-status","Error404");
t();return false;}else{if(!d.settings.soundcloud){d.settings.obj.tracks[z].attr("data-status","Error404");t();return false;}}if(d.settings.obj.tracks[z].data("sc_stream")!=undefined){var y={stream_url:null,artwork_url:null,title:null,permalink_url:null,user:{username:null,permalink_url:null}};
y.stream_url=d.settings.obj.tracks[z].data("sc_stream");y.artwork_url=d.settings.obj.tracks[z].data("sc_art");y.title=d.settings.obj.tracks[z].data("sc_title");
y.user.username=d.settings.obj.tracks[z].data("artist");y.user.permalink=d.settings.obj.tracks[z].data("artist_url");y.permalink=d.settings.obj.tracks[z].data("release_url");
_create_soundcloud(y);return false;}SC.get("/resolve",{url:x},function(A){if(A==undefined||A.errors){d.settings.obj.tracks[z].attr("data-status","Error404");
t();}else{if(A.length!=undefined){A.tracks=A;}else{if(A.kind!=undefined&&A.kind=="user"){SC.get("/users/"+A.id+"/tracks",function(B){B.tracks=B;_process_sc_tracks(B);
});}else{if(A.kind!=undefined&&A.kind=="group"){SC.get("/groups/"+A.id+"/tracks",function(B){B.tracks=B;_process_sc_tracks(B);});}else{if(A.tracks){_process_sc_tracks(A);
}else{_create_soundcloud(A);}}}}}});};_process_sc_tracks=function(A){var D=d.settings.obj.track_nr,x=d.settings.obj.tracks[D].attr("href"),y=D,E=[],z=d.settings.obj.tracks[D].attr("data-artist"),G=d.settings.obj.tracks[D].attr("data-artist_url"),F=d.settings.obj.tracks[D].attr("data-artist_target"),C=d.settings.obj.tracks[D].attr("data-release_url"),B=d.settings.obj.tracks[D].attr("data-release_target");
shop_url=d.settings.obj.tracks[D].attr("data-shop_url"),shop_target=d.settings.obj.tracks[D].attr("data-shop_target"),free_download=d.settings.obj.tracks[D].attr("data-free_download");
d.settings.obj.tracks.splice(D,1);d.settings.obj.tracks_size=d.settings.obj.tracks_size-1;d.settings.obj.track_nr=d.settings.obj.track_nr-1;if(shop_url==undefined||shop_url==""){shop_url="";
}if(shop_target==undefined||shop_target==""){shop_target="";}if(free_download==undefined||free_download==""){free_download="";}a.each(A.tracks,function(M,J){var O,N,I,L,K;
if(z==undefined||z==""){O=J.user.username;}else{O=z;}if(G==undefined||G==""){N=J.user.permalink_url;I="_blank";}else{N=G;if(F==undefined||F==""){I="_blank";
}else{I=F;}}if(C==undefined||C==""){L=J.permalink_url;K="_blank";}else{L=C;if(B==undefined||B==""){K="_blank";}else{K=B;}}var H='<a href="'+J.permalink_url+'" data-cover="" data-sc_list="'+x+'" data-sc_stream="'+J.stream_url+'" data-sc_art="'+J.artwork_url+'" data-sc_title="'+J.title+'" data-artist="'+O+'" data-artist_url="'+N+'" data-artist_target="'+I+'" data-release_url="'+L+'" data-release_target="'+K+'" data-shop_url="'+shop_url+'" data-shop_target="'+shop_target+'" data-free_download="'+free_download+'">'+J.title+"</a>";
E.push(a(H));});_insert_array_at(d.settings.obj.tracks,y,E);d.settings.obj.tracks_size=d.settings.obj.tracks_size+E.length;t();};_insert_array_at=function(z,y,x){Array.prototype.splice.apply(z,[y,0].concat(x));
return z;};_create_soundcloud=function(z){var B=d.settings.obj.track_nr,x=d.settings.obj.tracks[B].attr("href"),F=z.stream_url,y=d.settings.obj.tracks[B].attr("data-artist"),E=d.settings.obj.tracks[B].attr("data-artist_url"),D=d.settings.obj.tracks[B].attr("data-artist_target"),C=d.settings.obj.tracks[B].attr("data-release_url"),A=d.settings.obj.tracks[B].attr("data-release_target");
if(F===undefined){console.log("Soundcloud error: No stream URL!");d.settings.obj.tracks[B].attr("data-status","Error404");t();return false;}(F.indexOf("secret_token")==-1)?F=F+"?":F=F+"&";
F=F+"consumer_key="+d.settings.client_id;if(y==undefined||y==""){y=z.user.username;}if(E==undefined||E==""){E=z.user.permalink_url;}if(D==undefined||D==""){D="_blank";
}if(C==undefined||C==""){C=z.permalink_url;}if(A==undefined||A==""){A="_blank";}if(d.settings.replace_sc_covers==true){if(d.settings.obj.tracks[B].attr("data-cover")==undefined||d.settings.obj.tracks[B].attr("data-cover")==""){d.settings.obj.tracks[B].attr("data-cover",z.artwork_url);
}}else{d.settings.obj.tracks[B].attr("data-cover",z.artwork_url);}d.settings.obj.tracks[B].attr("data-sc",x);d.settings.obj.tracks[B].attr("href",F);d.settings.obj.tracks[B].attr("data-artist",y);
d.settings.obj.tracks[B].attr("data-artist_url",E);d.settings.obj.tracks[B].attr("data-artist_target",D);d.settings.obj.tracks[B].attr("data-release_url",C);
d.settings.obj.tracks[B].attr("data-release_target",A);d.settings.obj.tracks[B].text(z.title);_create_track();};_create_track=function(){d.settings.rebuild=true;
var H=d.settings.obj.track_nr,x=d.settings.obj.tracks[H].attr("href"),G=d.settings.obj.tracks[H].text(),M=d.settings.obj.tracks[H].data("cover"),C=d.settings.obj.tracks[H].data("artist"),K=d.settings.obj.tracks[H].data("artist_url"),J=d.settings.obj.tracks[H].data("artist_target"),I=d.settings.obj.tracks[H].data("release_url"),F=d.settings.obj.tracks[H].data("release_target"),B=d.settings.obj.tracks[H].data("shop_url"),E=d.settings.obj.tracks[H].data("shop_target"),A=d.settings.obj.tracks[H].data("free_download"),D=a(d.settings.track_html),z=null;
if(a('.sp-queue .sp-track-control[href="'+x+'"]',d.el).length){d.settings.obj.tracks[H].attr("data-status","already_onlist");t();return false;}D.find(".sp-track-control").attr("href",x);
if(M==undefined||M==""){M=d.settings.no_track_image;}D.find(".sp-cover-artwork img").attr("src",M);D.find(".sp-title-button").text(G);if(I!=undefined||I!=""){D.find(".sp-title-button").attr("href",I);
if(F!=undefined||F!=""){D.find(".sp-title-button").attr("target",F);}}if(C!=undefined&&C!=""){D.find(".sp-artist-button").text(C);if(K!=undefined||K!=""){D.find(".sp-artist-button").attr("href",K);
if(J!=undefined&&J!=""){D.find(".sp-artist-button").attr("target",J);}}}if(B!=undefined&&B!=""){D.find(".sp-cart-button").attr("href",B);if(E!=undefined&&E!=""){D.find(".sp-cart-button").attr("target",E);
}if(A!=undefined&&A=="yes"){D.find(".sp-cart-button").addClass("sp-download-button");D.find(".sp-cart-button").attr("target",E);D.find(".sp-cart-button").attr("download",B);
}}else{D.find(".sp-cart-button").remove();}if(d.settings.obj.tracks[H].data("sc")!=undefined){var y=d.settings.obj.tracks[H].data("sc");D.attr("data-sc",y).addClass("sc-track");
}if(d.settings.obj.tracks[H].data("sc_list")!=undefined){var L=d.settings.obj.tracks[H].data("sc_list");D.attr("data-sc_list",L).addClass("sc-list");}d.settings.tracklist.append(D);
z=d.settings.tracklist.find(D);d.settings.track_id++;d.settings.new_tracks_nr++;d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;
if(d.settings.tracklist_length==0){d.settings.track=z;}d.settings.obj.tracks[H].attr("data-status","track_ready");z.find(".sp-track-control").on("click",j);
z.find(".sp-remove-button").on("click",o);t();};var j=function(z){z.preventDefault();d.settings.play_from_list=false;var A=a(this).parents('tr[class*="sp-track"]');
if(A.hasClass("playing")||A.hasClass("paused")){_play();return false;}if(d.settings.smooth_transition&&d.settings.track){var x=d.settings.volume;var y=0;
a({vol:x}).animate({vol:y},{duration:1000,step:function(B,C){Math.ceil(d.settings.sound.setVolume(B));},complete:function(){_destruct_sound();d.settings.track=A;
_play();}});}else{_destruct_sound();d.settings.track=A;_play();}return false;};var o=function(x){x.preventDefault();var z=a(this).parents('tr[class*="sp-track"]'),D=a(this).parents('tr[class*="sp-track"]').index(),B=null,E=false;
if(z.hasClass("playing")){E=true;}if(d.settings.sound){B=d.settings.sound.url;}if(d.settings.tracklist_length==0){_destruct_sound();d.settings.track=null;
d.settings.tracklist_length=null;p(0);if(typeof(Storage)!=="undefined"){var C=a("#sp-queue-scroll tbody").html();sessionStorage.setItem("scamp_player_list",C);
if(d.settings.tracklist_length==null){sessionStorage.removeItem("scamp_player_list");}}return;}if(B==z.find(".sp-track-control ").attr("href")){var y=D,F=y+1,A=null;
if(F>d.settings.tracklist_length){F=0;}A=a("#sp-queue-scroll tbody tr:eq("+F+")");if(E){_destruct_sound();d.settings.track=A;_play();}else{_destruct_sound();
}}p(D);d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;if(typeof(Storage)!=="undefined"){var C=a("#sp-queue-scroll tbody").html();
sessionStorage.setItem("scamp_player_list",C);if(d.settings.tracklist_length==null){sessionStorage.removeItem("scamp_player_list");}}};var p=function(x){if(a("#sp-scroller tr").length>0){d.settings.tracklist.find("tbody tr:eq("+x+")").remove();
_set_queue_height();}return false;};var l=function(){a(".sp-volume-slider").on("touchstart mousedown",function(E){if(_has_touch()===true&&d.settings.is_mouse==false){var y=true;
}else{var y=false;}if(d.settings.tracklist_length==null){return;}var B=a(this),x=B.find(".sp-volume-position"),D=B.offset().left,A=B.width(),C=d.settings.sound,z=null;
a(document).on("touchmove mousemove",function(H){var G=y?H.originalEvent.changedTouches[0]:H;var F=Math.max(0,Math.min(G.clientX-D,A));z=Math.floor(F/A*100);
x.width(F);if(C){C.setVolume(z);}_set_vol_class(z);return false;}).on("touchend mouseup",function(F){d.settings.volume=z;a(this).unbind("touchmove mousemove");
a(this).unbind("touchend mouseup");return false;}).trigger({type:"touchmove mousemove",clientX:E.clientX});return false;});a(".sp-progress").bind("touchstart mousedown",function(D){if(_has_touch()===true&&d.settings.is_mouse==false){var y=true;
}else{var y=false;}if(d.settings.tracklist_length==null){return;}var z=a(this).addClass("searching"),x=z.find(".sp-postion"),C=z.offset().left,A=z.width(),B=d.settings.sound;
d.settings.searching=true;if(y==false){if(B){xPos=Math.max(0,Math.min(D.pageX-C,A));x.width(xPos);B.setPosition(xPos/A*B.durationEstimate);}}B.pause();
a(document).bind("touchmove mousemove",function(G){var F=y?G.originalEvent.changedTouches[0]:G;var E=Math.max(0,Math.min(F.clientX-C,A));x.width(E);if(B){B.setPosition(E/A*B.durationEstimate);
}return false;}).bind("touchend mouseup",function(E){d.settings.searching=false;z.removeClass("searching");if(d.el.hasClass("playing")&&B){B.resume();}a(this).unbind("touchmove mousemove");
a(this).unbind("touchend mouseup");return false;}).trigger({type:"touchmove mousemove",clientX:D.clientX});return false;});};_set_vol_class=function(x){if(x==0){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-max").addClass("sp-vol-off");
}else{if(x<=50){a(".sp-volume-button").removeClass("sp-vol-max sp-vol-off").addClass("sp-vol-medium");}else{if(x>75){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-off").addClass("sp-vol-max");
}}}};_format_time=function(y){var A=Math.floor(y/1000),x=Math.floor(A/60),z=A-x*60;return x+":"+(z<10?"0"+z:z);};_pretty_link=function(D){var I="",F="",x=D.attr("href"),J=D.data("cover"),A=D.data("artist"),H=D.data("artist_url"),G=D.data("artist_target"),E=D.data("release_url"),C=D.data("release_target"),z=D.data("shop_url"),B=D.data("shop_target"),y=D.data("free_download");
if(d.settings.link_filter!=undefined&&d.settings.link_filter!=""){if(a(D).find(d.settings.link_filter).length){F=a(D).find(d.settings.link_filter).text();
}}if(J==undefined||J==""){J="";}else{J='data-cover="'+J+'"';}if(A==undefined||A==""){A="";}else{A='data-artist="'+A+'"';}if(H==undefined||H==""){H="";}else{H='data-artist_url="'+H+'"';
}if(G==undefined||G==""){G="";}else{G='data-artist_target="'+G+'"';}if(E==undefined||E==""){E="";}else{E='data-release_url="'+E+'"';}if(C==undefined||C==""){C="";
}else{C='data-release_target="'+C+'"';}if(z==undefined||z==""){z="";}else{z='data-shop_url="'+z+'"';}if(B==undefined||B==""){B="";}else{B='data-shop_target="'+B+'"';
}if(y==undefined||y==""){y="no";}else{y='data-free_download="'+y+'"';}I='<a href="'+x+'" '+J+" "+A+" "+H+" "+G+" "+E+" "+C+" "+z+" "+B+" "+y+">"+F+"</a>";
I=a(I);return I;};_add_track=function(z){if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(d.settings.obj.status=="working"){return false;
}var x=_pretty_link(a(this)),y=[x];d.settings.obj={status:"working",action:"add_track",tracks:y,tracks_size:1,track_nr:-1};t();z.preventDefault();z.stopPropagation();
z.stopImmediatePropagation();return false;};_play_track=function(z){if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(d.settings.obj.status=="working"){return false;
}if(a(this).parents(".sp-list")){d.settings.play_from_list=true;}var x=_pretty_link(a(this)),y=[x];if(d.settings.mobile){var A="add_track";}else{var A="play_track";
}d.settings.obj={status:"working",action:"play_track",tracks:y,tracks_size:1,track_nr:-1};t();z.preventDefault();z.stopPropagation();z.stopImmediatePropagation();
return false;};_add_tracks=function(y){var B=a(this).data("id");if(B==undefined||B==""||a("#"+B).length<=0){return false;}if(d.settings.obj.status=="working"){return false;
}var A=a("#"+B),x=new Array(),z=a("a.sp-add-track, a.sp-play-track",A).length;a("a.sp-add-track, a.sp-play-track",A).each(function(C){x.push(_pretty_link(a(this)));
});d.settings.obj={status:"working",action:"add_tracks",tracks:x,tracks_size:z,track_nr:-1};t();y.preventDefault();y.stopPropagation();y.stopImmediatePropagation();
return false;};_play_tracks=function(y){var C=a(this).data("id");if(C==undefined||C==""||a("#"+C).length<=0){return false;}if(d.settings.obj.status=="working"){return false;
}var A=a("#"+C),x=new Array(),z=a("a.sp-add-track, a.sp-play-track",A).length;a("a.sp-add-track, a.sp-play-track",A).each(function(D){x.push(_pretty_link(a(this)));
});if(d.settings.mobile){var B="add_tracks";}else{var B="play_tracks";}d.settings.obj={status:"working",action:"play_tracks",tracks:x,tracks_size:z,track_nr:-1};
t();y.preventDefault();y.stopPropagation();y.stopImmediatePropagation();return false;};_debug=function(x){if(d.settings.debug){a("#scamp-console").append(x+"<br>");
}};var n=function(x){a(x).bind("touchstart mousedown",function(E){if(_has_touch()===true&&d.settings.is_mouse==false){var z=true;}else{var z=false;}if(d.settings.tracklist_length==null){return;
}var A=a(this).addClass("searching"),y=A.find(".sp-content-postion"),D=A.offset().left,B=A.width(),C=d.settings.sound;d.settings.searching=true;C.pause();
if(z==false){if(C){xPos=Math.max(0,Math.min(E.pageX-D,B));y.width(xPos);C.setPosition(xPos/B*C.durationEstimate);}}a(document).bind("touchmove mousemove",function(H){var G=z?H.originalEvent.changedTouches[0]:H;
var F=Math.max(0,Math.min(G.clientX-D,B));y.width(F);if(C){C.setPosition(F/B*C.durationEstimate);}return false;}).bind("touchend mouseup",function(F){d.settings.searching=false;
A.removeClass("searching");if(d.el.hasClass("playing")&&C){C.resume();}a(this).unbind("touchmove mousemove");a(this).unbind("touchend mouseup");return false;
}).trigger({type:"touchmove mousemove",clientX:E.clientX});return false;});};d.update_events=function(x){a(x).off("click",".sp-add-track",_add_track);a(x).off("click",".sp-play-track",_play_track);
a(x).off("click",".sp-add-list",_add_tracks);a(x).off("click",".sp-play-list",_play_tracks);n(a(".sp-content-control"));a(x).on("click",".sp-add-track",_add_track);
a(x).on("click",".sp-play-track",_play_track);a(x).on("click",".sp-add-list",_add_tracks);a(x).on("click",".sp-play-list",_play_tracks);};d.update_content=function(){var B=d.settings.track,z=null,A=null;
if(B==null){return;}a("a.sp-play-track").removeClass("sp-play sp-pause sp-stop sp-loading");a(".sp-content-control.sp-is-active").removeClass("sp-is-active");
if(B.hasClass("sc-list")){z=B.data("sc_list");}else{if(B.hasClass("sc-track")){z=B.data("sc");}else{z=B.find(".sp-track-control").attr("href");}}a('a.sp-play-track[href="'+z+'"]').each(function(){var E=a(this);
if(E.length>0){if(typeof E.data("control")!=="undefined"){var F=E.data("control");F=a("#"+F);if(F.length){F.addClass("sp-is-active");var D=a("#scamp_player .sp-position").css("width");
F.find(".sp-content-position").css("width",D);}}switch(d.settings.status){case"loading":E.addClass("sp-loading");break;case"play":E.addClass("sp-play");
break;case"pause":E.addClass("sp-pause");break;case"stop":E.addClass("sp-stop");a(".sp-content-control.sp-is-active").removeClass("sp-is-active");break;
}}});var y=a('.sp-list a.sp-play-track[href="'+z+'"]');if(y.length>0){var C=y.parents(".sp-list").attr("id"),x=a('.sp-play-list[data-id="'+C+'"]');a(".sp-play-list").removeClass("sp-play sp-pause sp-stop sp-loading");
if(x.length){switch(d.settings.status){case"loading":x.addClass("sp-loading");break;case"play":x.addClass("sp-play");break;case"pause":x.addClass("sp-pause");
break;case"stop":x.addClass("sp-stop");break;}}}};d.addTrack=function(x,z){if(d.settings.obj.status=="working"){return false;}if(typeof x=="undefined"){return false;
}var x=a('<a href="'+x.url+'" data-cover="'+x.cover+'" data-artist="'+x.artist+'" data-artist_url="'+x.artist_url+'" data-artist_target="'+x.artist_target+'" data-release_url="'+x.release_url+'" data-release_target="'+x.release_target+'" data-shop_url="'+x.shop_url+'" data-shop_target="'+x.shop_target+'" data-free_download="'+y[i].free_download+'">'+x.title+"</a>"),y=[x];
d.settings.obj={status:"working",action:z,tracks:y,tracks_size:1,track_nr:-1};t();return false;};d.addTracks=function(A,D){if(d.settings.obj.status=="working"){return false;
}if(typeof A=="undefined"||A.length==0){return false;}var x=new Array(),C=A.length;for(var B=0,z=C;B<z;B++){var y=a('<a href="'+A[B].url+'" data-cover="'+A[B].cover+'" data-artist="'+A[B].artist+'" data-artist_url="'+A[B].artist_url+'" data-artist_target="'+A[B].artist_target+'" data-release_url="'+A[B].release_url+'" data-release_target="'+A[B].release_target+'" data-shop_url="'+A[B].shop_url+'" data-shop_target="'+A[B].shop_target+'"  data-free_download="'+A[B].free_download+'">'+A[B].title+"</a>");
x.push(y);}d.settings.obj={status:"working",action:D,tracks:x,tracks_size:C,track_nr:-1};t();};d.playerAction=function(x){if(d.settings.obj.status=="working"){return false;
}if(x=="play"){_play();}else{if(x=="stop"){k();}else{if(x=="next"){f();}else{if(x=="prev"){e();}}}}};q();};})(jQuery);